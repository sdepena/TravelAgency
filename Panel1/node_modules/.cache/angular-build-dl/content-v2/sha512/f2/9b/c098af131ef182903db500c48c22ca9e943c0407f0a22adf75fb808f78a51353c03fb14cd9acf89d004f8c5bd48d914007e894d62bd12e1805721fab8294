!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function r(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(self.webpackChunktravelagencyangular=self.webpackChunktravelagencyangular||[]).push([[767],{86767:function(t,a,n){"use strict";n.r(a),n.d(a,{gx_query_viewer:function(){return o}});var i=n(46841),o=function(){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(0,i.r)(this,e),this.mapServices={net:"gxqueryviewerforsd.aspx",java:"qviewer.services.gxqueryviewerforsd"},this.propsNotToPost=["baseUrl","env","mapServices","object","objectCall","propsNotToPost","parameters","elements","dataVersionId"],this.configurationObserver=new MutationObserver(function(){r.configurationChangedHandler()})}var a,n,o;return a=t,(n=[{key:"parameterValueChangedHandler",value:function(e){e.stopPropagation(),this.getParameters()}},{key:"elementChangedHandler",value:function(e){e.stopPropagation(),this.getElements()}},{key:"configurationChangedHandler",value:function(){this.getParameters(),this.getElements()}},{key:"componentWillLoad",value:function(){this.getParameters(),this.getElements()}},{key:"componentDidLoad",value:function(){this.configurationObserver.observe(this.element,{childList:!0,subtree:!0})}},{key:"componentDidRender",value:function(){this.element.querySelector("form").submit()}},{key:"disconnectedCallback",value:function(){this.configurationObserver.disconnect()}},{key:"parseObjectToObjectcall",value:function(){try{this.objectCall=JSON.parse(this.object)}catch(e){this.objectCall=null}}},{key:"hasObjectCall",value:function(){return Array.isArray(this.objectCall)&&this.objectCall.length>=2}},{key:"loadObjectNameFromObjectCall",value:function(){this.hasObjectCall()&&(this.objectName=this.objectCall[1])}},{key:"postData",value:function(){var r=this;return this.parseObjectToObjectcall(),this.loadObjectNameFromObjectCall(),[].concat(e(Object.keys(t.prototype).filter(function(e){return!r.propsNotToPost.includes(e)}).map(function(e){return(0,i.h)("input",{type:"hidden",name:e,value:r[e]})})),[(0,i.h)("input",{type:"hidden",name:"Elements",value:this.elements}),(0,i.h)("input",{type:"hidden",name:"Parameters",value:this.parameters})])}},{key:"getParameters",value:function(){var e=[];this.hasObjectCall()?this.objectCall.slice(2).forEach(function(t){var r={};r.Value=encodeURIComponent(t),r.Name="",e.push(r)}):Array.from(document.getElementsByTagName("gx-query-viewer-parameter")).forEach(function(t){var r={};r.Value=encodeURIComponent(t.Value),r.Name=t.Name,e.push(r)}),this.parameters=JSON.stringify(e)}},{key:"getElements",value:function(){var e=this,t=[];Array.from(document.getElementsByTagName("gx-query-viewer-element")).forEach(function(r){var a={};a.Name=r.name,a.Title=r.elementTitle,a.Visible=r.visible,a.Type=r.type,a.Axis=r.axis,a.Aggregation=r.aggregation,a.DataField=r.dataField,r.axisOrderType&&(a.AxisOrder={Type:r.axisOrderType},r.axisOrderValues&&(a.AxisOrder.Values=r.axisOrderValues)),r.filterType&&(a.Filter={Type:r.filterType},r.axisOrderValues&&(a.Filter.Values=r.filterValues)),r.expandCollapseType&&(a.ExpandCollapse={Type:r.expandCollapseType},r.axisOrderValues&&(a.ExpandCollapse.Values=r.expandCollapseValues));var n=e.getGrouping(r);Object.keys(n).length>0&&(a.Grouping=n),r.raiseItemClick&&(a.Action={RaiseItemClick:r.raiseItemClick}),Array.from(r.getElementsByTagName("gx-query-viewer-element-format")).forEach(function(e){var t={};t.Picture=e.picture,t.Subtotals=e.subtotals,t.CanDragToPages=e.canDragToPages,t.Style=e.formatStyle,t.TargetValue=e.targetValue,t.MaximumValue=e.maximumValue;var n=Array.from(r.getElementsByTagName("gx-query-viewer-format-style")),i=[],o=[];n.forEach(function(e){"Values"===e.type?i.push({Value:e.value,ApplyToRowOrColumn:e.applyToRowOrColumn,StyleOrClass:e.styleOrClass}):o.push({Value1:e.value1,Value2:e.value2,Operator:e.operator,StyleOrClass:e.styleOrClass})}),i.length>0&&(t.ValuesStyle=i),o.length>0&&(t.ConditionalStyles=o),a.Format=t}),t.push(a)}),this.elements=JSON.stringify(t)}},{key:"getGrouping",value:function(e){return function(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e.groupingGroupByYear&&{GroupByYear:e.groupingGroupByYear}),e.groupingYearTitle&&{YearTitle:e.groupingYearTitle}),e.groupingGroupBySemester&&{GroupBySemester:e.groupingGroupBySemester}),e.groupingSemesterTitle&&{SemesterTitle:e.groupingSemesterTitle}),e.groupingGroupByQuarter&&{GroupByQuarter:e.groupingGroupByQuarter}),e.groupingQuarterTitle&&{QuarterTitle:e.groupingQuarterTitle}),e.groupingGroupByMonth&&{GroupByMonth:e.groupingGroupByMonth}),e.groupingMonthTitle&&{MonthTitle:e.groupingMonthTitle}),e.groupingGroupByDayOfWeek&&{GroupByDayOfWeek:e.groupingGroupByDayOfWeek}),e.groupingDayOfWeekTitle&&{DayOfWeekTitle:e.groupingDayOfWeekTitle}),e.groupingHideValue&&{HideValue:e.groupingHideValue})}}},{key:"render",value:function(){return(0,i.h)(i.H,null,(0,i.h)("iframe",{name:"query_viewer","data-version-id":this.dataVersionId}),(0,i.h)("form",{hidden:!0,target:"query_viewer",action:this.baseUrl+this.mapServices[this.env],method:"POST"},this.postData()))}},{key:"element",get:function(){return(0,i.g)(this)}}])&&r(a.prototype,n),o&&r(a,o),t}();o.style="gx-query-viewer{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1}gx-query-viewer iframe{-ms-flex:1;flex:1;border:0}"}}])}();