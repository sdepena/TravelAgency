var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var a=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],n=0,s=o.length;n<s;n++,i++)a[i]=o[n];return a};System.register(["./p-35f24427.system.js"],(function(e){"use strict";var t,r,a,i;return{setters:[function(e){t=e.r;r=e.h;a=e.H;i=e.g}],execute:function(){var o="gx-query-viewer{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1}gx-query-viewer iframe{-ms-flex:1;flex:1;border:0}";var n=e("gx_query_viewer",function(){function e(e){var r=this;t(this,e);this.mapServices={net:"gxqueryviewerforsd.aspx",java:"qviewer.services.gxqueryviewerforsd"};this.propsNotToPost=["baseUrl","env","mapServices","object","objectCall","propsNotToPost","parameters","elements","dataVersionId"];this.configurationObserver=new MutationObserver((function(){r.configurationChangedHandler()}))}e.prototype.parameterValueChangedHandler=function(e){e.stopPropagation();this.getParameters()};e.prototype.elementChangedHandler=function(e){e.stopPropagation();this.getElements()};e.prototype.configurationChangedHandler=function(){this.getParameters();this.getElements()};e.prototype.componentWillLoad=function(){this.getParameters();this.getElements()};e.prototype.componentDidLoad=function(){this.configurationObserver.observe(this.element,{childList:true,subtree:true})};e.prototype.componentDidRender=function(){var e=this.element.querySelector("form");e.submit()};e.prototype.disconnectedCallback=function(){this.configurationObserver.disconnect()};e.prototype.parseObjectToObjectcall=function(){try{this.objectCall=JSON.parse(this.object)}catch(e){this.objectCall=null}};e.prototype.hasObjectCall=function(){return Array.isArray(this.objectCall)&&this.objectCall.length>=2};e.prototype.loadObjectNameFromObjectCall=function(){if(this.hasObjectCall()){this.objectName=this.objectCall[1]}};e.prototype.postData=function(){var e=this;this.parseObjectToObjectcall();this.loadObjectNameFromObjectCall();return __spreadArrays(Object.keys(n.prototype).filter((function(t){return!e.propsNotToPost.includes(t)})).map((function(t){return r("input",{type:"hidden",name:t,value:e[t]})})),[r("input",{type:"hidden",name:"Elements",value:this.elements}),r("input",{type:"hidden",name:"Parameters",value:this.parameters})])};e.prototype.getParameters=function(){var e=[];if(this.hasObjectCall()){this.objectCall.slice(2).forEach((function(t){var r={};r["Value"]=encodeURIComponent(t);r["Name"]="";e.push(r)}))}else{var t=Array.from(document.getElementsByTagName("gx-query-viewer-parameter"));t.forEach((function(t){var r={};r["Value"]=encodeURIComponent(t.Value);r["Name"]=t.Name;e.push(r)}))}this.parameters=JSON.stringify(e)};e.prototype.getElements=function(){var e=this;var t=[];var r=Array.from(document.getElementsByTagName("gx-query-viewer-element"));r.forEach((function(r){var a={};a["Name"]=r.name;a["Title"]=r.elementTitle;a["Visible"]=r.visible;a["Type"]=r.type;a["Axis"]=r.axis;a["Aggregation"]=r.aggregation;a["DataField"]=r.dataField;if(r.axisOrderType){a["AxisOrder"]={Type:r.axisOrderType};if(r.axisOrderValues){a["AxisOrder"]["Values"]=r.axisOrderValues}}if(r.filterType){a["Filter"]={Type:r.filterType};if(r.axisOrderValues){a["Filter"]["Values"]=r.filterValues}}if(r.expandCollapseType){a["ExpandCollapse"]={Type:r.expandCollapseType};if(r.axisOrderValues){a["ExpandCollapse"]["Values"]=r.expandCollapseValues}}var i=e.getGrouping(r);if(Object.keys(i).length>0){a["Grouping"]=i}if(r.raiseItemClick){var o={RaiseItemClick:r.raiseItemClick};a["Action"]=o}var n=Array.from(r.getElementsByTagName("gx-query-viewer-element-format"));n.forEach((function(e){var t={};t["Picture"]=e.picture;t["Subtotals"]=e.subtotals;t["CanDragToPages"]=e.canDragToPages;t["Style"]=e.formatStyle;t["TargetValue"]=e.targetValue;t["MaximumValue"]=e.maximumValue;var i=Array.from(r.getElementsByTagName("gx-query-viewer-format-style"));var o=[];var n=[];i.forEach((function(e){if(e.type==="Values"){var t={Value:e.value,ApplyToRowOrColumn:e.applyToRowOrColumn,StyleOrClass:e.styleOrClass};o.push(t)}else{var r={Value1:e.value1,Value2:e.value2,Operator:e.operator,StyleOrClass:e.styleOrClass};n.push(r)}}));if(o.length>0){t["ValuesStyle"]=o}if(n.length>0){t["ConditionalStyles"]=n}a["Format"]=t}));t.push(a)}));this.elements=JSON.stringify(t)};e.prototype.getGrouping=function(e){var t=function(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e.groupingGroupByYear&&{GroupByYear:e.groupingGroupByYear}),e.groupingYearTitle&&{YearTitle:e.groupingYearTitle}),e.groupingGroupBySemester&&{GroupBySemester:e.groupingGroupBySemester}),e.groupingSemesterTitle&&{SemesterTitle:e.groupingSemesterTitle}),e.groupingGroupByQuarter&&{GroupByQuarter:e.groupingGroupByQuarter}),e.groupingQuarterTitle&&{QuarterTitle:e.groupingQuarterTitle}),e.groupingGroupByMonth&&{GroupByMonth:e.groupingGroupByMonth}),e.groupingMonthTitle&&{MonthTitle:e.groupingMonthTitle}),e.groupingGroupByDayOfWeek&&{GroupByDayOfWeek:e.groupingGroupByDayOfWeek}),e.groupingDayOfWeekTitle&&{DayOfWeekTitle:e.groupingDayOfWeekTitle}),e.groupingHideValue&&{HideValue:e.groupingHideValue})};return t};e.prototype.render=function(){return r(a,null,r("iframe",{name:"query_viewer","data-version-id":this.dataVersionId}),r("form",{hidden:true,target:"query_viewer",action:this.baseUrl+this.mapServices[this.env],method:"POST"},this.postData()))};Object.defineProperty(e.prototype,"element",{get:function(){return i(this)},enumerable:false,configurable:true});return e}());n.style=o}}}));