import{h as e,r as t,c as i,H as l,g as a}from"./p-b4b65ebe.js";import{m as o}from"./p-dadaf4bf.js";import{c as r,m as n}from"./p-1d4effc4.js";let s=0;const d={body:"p",caption1:"span",caption2:"span",footnote:"footer",headline:"h1",subheadline:"h2"};class g{constructor(e,t){this.component=e,this.handleChange=t.handleChange,this.handleTriggerClick=t.handleTriggerClick,this.handleValueChanging=t.handleValueChanging}getNativeInputId(){return this.getNativeInput().id}getNativeInput(){return this.component.element.querySelector("[data-native-element]")}getCssClasses(){const e=[];return e.push("file"===this.component.type?"form-control-file":"form-control"),e.join(" ")}getTriggerCssClasses(){const e=[];return e.push("btn"),e.push("btn-outline-secondary"),e.join(" ")}getValueFromEvent(e){return e.target&&e.target.value}stopPropagation(e){e.stopPropagation()}getReadonlyContent(e,t){let i=t;if(i&&("datetime-local"===e.type||"date"===e.type)){const t=new Date(e.value);"date"===e.type&&t.setDate(t.getDate()+1);const l=new Intl.DateTimeFormat("default",{year:"numeric",month:"numeric",day:"numeric"}).format(t);i="date"===e.type?""+l:`${l} ${new Intl.DateTimeFormat("default",{hour:"numeric",minute:"numeric"}).format(t)}`}return i}valueChanged(){const e=this.getNativeInput();e&&e.value!==this.component.value&&(e.value=this.component.value)}render(t){const i=this.component,l=this.handleValueChanging;this.inputId||(this.inputId=i.element.id?i.element.id+"__edit":"gx-edit-auto-id-"+s++);const a={"aria-disabled":i.disabled?"true":void 0,autocapitalize:i.autocapitalize,autocomplete:i.autocomplete,autocorrect:i.autocorrect,class:this.getCssClasses(),"data-native-element":"",disabled:i.disabled,hidden:i.readonly,id:this.inputId,onChange:this.handleChange,onInput:l,onClick:i.disabled?null:this.stopPropagation,placeholder:i.placeholder};let o;if(i.multiline)o=e("textarea",Object.assign({},a),i.value);else{const l=e("input",Object.assign({},a,{type:i.type,value:i.value}));if(i.showTrigger){const a=i.element.querySelector("[slot='trigger-content']");o=e("div",{class:"input-group",hidden:i.readonly},l,e("div",{class:"input-group-append"},e("button",{class:this.getTriggerCssClasses(),onClick:this.handleTriggerClick,type:"button",disabled:i.disabled,"aria-label":i.triggerText},null!==a?t.triggerContent:i.triggerText)))}else o=l}const r=this.getReadonlyTagByFontCategory();return[e("gx-bootstrap",null),e(r,{key:"readonly",hidden:!i.readonly,"data-readonly":"",class:{"gx-line-clamp":this.shouldClampLines()},style:this.shouldClampLines()&&{"--max-lines":i.maxLines.toString(),"--max-height":i.maxHeight+"px"}},i.lineClamp&&e("div",{class:"line-measuring","aria-hidden":!0},"A"),this.getReadonlyContent(i,i.value)),o]}getReadonlyTagByFontCategory(){return d[this.component.fontCategory]||"span"}shouldClampLines(){return this.component.lineClamp&&this.component.maxLines>0}}const f=class{constructor(e){t(this,e),this.change=i(this,"change",7),this.input=i(this,"input",7),this.gxTriggerClick=i(this,"gxTriggerClick",7),this.fontCategory="body",this.invisibleMode="collapse",this.disabled=!1,this.lineClamp=!1,this.type="text",this.highlightable=!1,this.maxLines=0,this.maxHeight=0,this.renderer=new g(this,{handleChange:this.handleChange.bind(this),handleTriggerClick:this.handleTriggerClick.bind(this),handleValueChanging:this.handleValueChanging.bind(this)}),r(this,[{cssVariableName:"--font-category",propertyName:"fontCategory"}]),n(this,"[data-readonly]",".line-measuring")}async getNativeInputId(){return this.renderer.getNativeInputId()}componentDidLoad(){this.toggleValueSetClass(),this.readonly&&o(this)}valueChanged(){this.renderer.valueChanged(),this.toggleValueSetClass()}toggleValueSetClass(){""===this.value?this.element.classList.remove("value-set"):this.element.classList.add("value-set")}handleChange(e){this.value=this.renderer.getValueFromEvent(e),this.change.emit(e)}handleValueChanging(e){this.value=this.renderer.getValueFromEvent(e),this.input.emit(e)}handleTriggerClick(e){this.disabled||e.stopPropagation(),this.gxTriggerClick.emit(e)}render(){return e(l,{class:{"gx-edit--single-line":"date"===this.type||"datetime-local"===this.type}},this.renderer.render({triggerContent:e("slot",{name:"trigger-content"})}))}get element(){return a(this)}static get watchers(){return{value:["valueChanged"]}}};f.style=".gx-line-clamp{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:var(--max-lines);overflow:hidden;max-height:var(--max-height)}.line-measuring{visibility:hidden;position:absolute}gx-edit [data-native-element]{margin-top:var(--margin-top, 0);margin-bottom:var(--margin-bottom, 0);height:unset}gx-edit [data-native-element]:focus{-webkit-box-shadow:none;box-shadow:none}gx-edit:not([show-trigger]) [slot=trigger-content],gx-edit[show-trigger=false] [slot=trigger-content]{display:none}gx-edit:not([show-trigger]) [data-native-element],gx-edit[show-trigger=false] [data-native-element]{margin-right:var(--margin-right, 0);margin-left:var(--margin-left, 0)}gx-edit[show-trigger] .input-group,gx-edit[show-trigger=true] .input-group{margin-right:var(--margin-right, 0);margin-left:var(--margin-left, 0)}gx-edit [data-readonly]{margin:0;margin-right:var(--margin-right, 0);margin-left:var(--margin-left, 0);margin-top:var(--margin-top, 0);margin-bottom:var(--margin-bottom, 0);padding:0;line-height:1.2;white-space:break-spaces;-ms-flex:1;flex:1}gx-edit h1,gx-edit h2,gx-edit footer{font-size:inherit;font-weight:inherit}gx-table-cell[align=center]>gx-edit,gx-table-cell[align=right]>gx-edit{-ms-flex-preferred-size:auto;flex-basis:auto;-ms-flex-positive:0;flex-grow:0}gx-edit{display:-ms-flexbox;display:flex;-ms-flex-align:stretch;align-items:stretch;-ms-flex:1;flex:1}gx-edit[hidden]{display:none !important}gx-edit[hidden][invisible-mode=keep-space]{display:-ms-flexbox !important;display:flex !important;visibility:hidden}gx-edit.gx-edit--single-line [data-readonly]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}";let m=0;class h{constructor(e){this.component=e,this.LABEL_WIDTH_BY_POSITION={bottom:"label-bottom",float:"",left:"label-left",none:"sr-only",right:"label-right",top:"label-top"},this.INNER_CONTROL_WIDTH_BY_LABEL_POSITION={bottom:"field-label-bottom",float:"",left:"field-label-left",none:"field-label-top",right:"field-label-right",top:"field-label-top"}}getLabelCssClass(){const e=[];return e.push(this.LABEL_WIDTH_BY_POSITION[this.component.labelPosition]),"float"!==this.component.labelPosition&&e.push("col-form-label"),e.join(" ")}getInnerControlContainerClass(){return{[this.INNER_CONTROL_WIDTH_BY_LABEL_POSITION[this.component.labelPosition]]:!0,"d-flex":!0}}shouldRenderLabelBefore(){const e=this.component;return!e.labelPosition||"top"===e.labelPosition||"right"===e.labelPosition||"bottom"===e.labelPosition||"left"===e.labelPosition||"none"===e.labelPosition}async componentDidLoad(){const e=this.component,t=e.element.querySelector("[area='field']");if(t&&t.getNativeInputId){const i=await t.getNativeInputId();if(i){const t=e.element.querySelector("#"+i);null!==t&&t.setAttribute("data-part","field");const l=e.element.querySelector("label");i&&l&&l.setAttribute("for",i)}}}renderForRadio(t,i,l){const a=this.formFieldId+"-label",o=e("div",{class:this.getLabelCssClass(),id:a,"data-part":"label"},e("div",{class:"label-content"},this.component.labelCaption));return e("div",{class:"form-group mb-0","aria-labelledby":a,role:"group"},e("div",{class:{"radio-group":!0,"no-gutters":!0,["label-position-"+this.component.labelPosition]:"top"===this.component.labelPosition||"right"===this.component.labelPosition||"bottom"===this.component.labelPosition||"left"===this.component.labelPosition}},t&&i?o:null,e("div",{class:this.getInnerControlContainerClass()},l),t&&!i?o:null))}render(t){const i=this.component,l=null!==i.element.querySelector("gx-radio-group[area='field']"),a=this.shouldRenderLabelBefore(),o="none"!==i.labelPosition;if(this.formFieldId||(this.formFieldId=i.element.id||"gx-form-field-auto-id-"+m++),l)return this.renderForRadio(o,a,t.default);{const l=e("label",{class:this.getLabelCssClass(),"data-part":"label"},e("div",{class:"label-content"},i.labelCaption)),r="float"===i.labelPosition?e("div",null,t.default,l):e("div",{class:{"form-group":!0,"no-gutters":!0,"mb-0":!0,"flex-column":"top"===i.labelPosition,"flex-column-reverse":"bottom"===i.labelPosition,"flex-row-reverse":"right"===i.labelPosition,"flex-row":"left"===i.labelPosition}},o&&a?l:null,e("div",{class:this.getInnerControlContainerClass()},t.default),o&&!a?l:null);return[e("gx-bootstrap",null),r]}}}const x=class{constructor(e){t(this,e),this.invisibleMode="collapse",this.renderer=new h(this)}componentDidLoad(){this.renderer.componentDidLoad()}render(){return this.renderer.render({default:e("slot",null)})}get element(){return a(this)}};x.style=".gx-line-clamp{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:var(--max-lines);overflow:hidden;max-height:var(--max-height)}.line-measuring{visibility:hidden;position:absolute}gx-form-field{--elevation:0}gx-form-field [data-part=field]{-webkit-box-shadow:0 calc(var(--elevation) * 0.125rem) calc(var(--elevation) * 0.25rem) rgba(0, 0, 0, calc(var(--elevation) * 0.075));box-shadow:0 calc(var(--elevation) * 0.125rem) calc(var(--elevation) * 0.25rem) rgba(0, 0, 0, calc(var(--elevation) * 0.075))}gx-form-field[label-position=float]>div{position:relative;margin-bottom:1em;--input-padding-y:0.4em;--input-padding-x:0.7rem}gx-form-field[label-position=float]>div input,gx-form-field[label-position=float]>div>label{padding:var(--input-padding-y) var(--input-padding-x)}gx-form-field[label-position=float]>div>label{position:absolute;top:0;left:0;display:block;width:100%;margin-bottom:0;line-height:1.5;color:#495057;border:1px solid transparent;border-radius:0.25em;-webkit-transition:all 0.1s ease-in-out;transition:all 0.1s ease-in-out}gx-form-field[label-position=float]>div input::-webkit-input-placeholder{color:transparent}gx-form-field[label-position=float]>div input:-ms-input-placeholder{color:transparent}gx-form-field[label-position=float]>div input::-ms-input-placeholder{color:transparent}gx-form-field[label-position=float]>div input::-moz-placeholder{color:transparent}gx-form-field[label-position=float]>div input::placeholder{color:transparent}gx-form-field[label-position=float]>div [area=field].value-set input{padding-top:calc( var(--input-padding-y) + var(--input-padding-y) * (2 / 3) );padding-bottom:calc(var(--input-padding-y) / 3)}gx-form-field[label-position=float]>div [area=field].value-set~label{padding-top:calc(var(--input-padding-y) / 3);padding-bottom:calc(var(--input-padding-y) / 3);font-size:12px;color:#777}gx-form-field .label-position-top{-ms-flex-direction:column;flex-direction:column}gx-form-field .label-position-right{-ms-flex-direction:row-reverse;flex-direction:row-reverse}gx-form-field .label-position-bottom{-ms-flex-direction:column-reverse;flex-direction:column-reverse}gx-form-field .label-position-left{-ms-flex-direction:row;flex-direction:row}gx-form-field .label-left,gx-form-field .label-right{position:relative;width:100%;-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}gx-form-field .label-right{text-align:right}gx-form-field .label-top,gx-form-field .label-bottom,gx-form-field .field-label-top,gx-form-field .field-label-bottom{position:relative;width:100%;max-width:100%}gx-form-field .label-top,gx-form-field .label-bottom{-ms-flex:0;flex:0}gx-form-field .field-label-top,gx-form-field .field-label-bottom{-ms-flex:1;flex:1}gx-form-field .field-label-left,gx-form-field .field-label-right{position:relative;width:100%;-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}gx-form-field .label-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}gx-form-field>.form-group{max-height:100%;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-wrap:nowrap;flex-wrap:nowrap}gx-form-field>.form-group>div{-ms-flex:1;flex:1;max-height:100%}gx-form-field .radio-group{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-wrap:wrap;flex-wrap:wrap}gx-form-field gx-checkbox .custom-checkbox{padding-top:calc(1.375rem + 1px);padding-left:0.75rem}gx-form-field gx-checkbox .custom-control-label:before,gx-form-field gx-checkbox .custom-control-label:after{top:calc(0.25em - 15px)}gx-form-field gx-radio-option .custom-radio{padding-top:calc(0.375em + 1px)}gx-form-field gx-radio-option .custom-control-label:before,gx-form-field gx-radio-option .custom-control-label:after{top:calc(-0.15em + 7px)}gx-table-cell[align=center]>gx-form-field .label-left,gx-table-cell[align=center]>gx-form-field .label-right,gx-table-cell[align=center]>gx-form-field .field-label-left,gx-table-cell[align=center]>gx-form-field .field-label-right,gx-table-cell[align=right]>gx-form-field .label-left,gx-table-cell[align=right]>gx-form-field .label-right,gx-table-cell[align=right]>gx-form-field .field-label-left,gx-table-cell[align=right]>gx-form-field .field-label-right{-ms-flex-preferred-size:0;flex-basis:0;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;max-width:100%}gx-form-field{display:-ms-flexbox;display:flex;justify-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;-ms-flex:1;flex:1}gx-form-field[hidden]{display:none !important}gx-form-field[hidden][invisible-mode=keep-space]{display:-ms-flexbox !important;display:flex !important;visibility:hidden}[align=center]>gx-form-field [data-part=field],[align=center]>gx-form-field [data-readonly]{text-align:center}[align=right]>gx-form-field [data-part=field],[align=right]>gx-form-field [data-readonly]{text-align:right}[valign=middle]>gx-form-field [data-readonly],[valign=middle]>gx-form-field [data-part=label]{-ms-flex-item-align:center;align-self:center}[valign=bottom]>gx-form-field [data-readonly]{-ms-flex-item-align:end;align-self:flex-end;line-height:1.25}[valign=bottom]>gx-form-field [data-part=label]{-ms-flex-item-align:end;align-self:flex-end}";export{f as gx_edit,x as gx_form_field}