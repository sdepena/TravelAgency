import{r as e,c as t,h as i,H as a,g as s}from"./p-b4b65ebe.js";const n=class{constructor(i){e(this,i),this.gxGaugeDidLoad=t(this,"gxGaugeDidLoad",7),this.type="line",this.showValue=!1,this.showMinMax=!1,this.minValue=0,this.thickness=10,this.rangesChildren=[],this.maxValueAux=this.minValue,this.totalAmount=0}onGaugeRangeDidLoad({detail:e}){this.rangesChildren=[...this.rangesChildren,e],this.totalAmount+=e.amount,e.element.addEventListener("gxGaugeRangeDidUnload",()=>{this.rangesChildren=this.rangesChildren.filter(t=>t!=e),this.totalAmount-=e.amount}),e.element.addEventListener("gxGaugeRangeDidUpdate",()=>{const t=this.rangesChildren.findIndex(t=>t===e);this.rangesChildren.splice(t,1,e),this.totalAmount=0;for(const e of this.rangesChildren)this.totalAmount+=e.amount})}updateMaxValueAux(){this.maxValueAux=void 0===this.maxValue?this.minValue+this.totalAmount:this.maxValue}calcThickness(){return"number"==typeof this.thickness&&this.thickness>0&&this.thickness<=100?this.thickness/5:10}calcPercentage(){return this.value<=this.minValue?0:100*(this.value-this.minValue)/(this.maxValueAux-this.minValue)}addCircleRanges({amount:e,color:t},a,s){const n=2*Math.PI*s;return i("circle",{class:"circle-range",r:s,cx:"50%",cy:"50%",stroke:t,"stroke-dasharray":`${n*(e/(this.maxValueAux-this.minValue))}, ${n}`,fill:"none",transform:`rotate(${a+-90} 50,50)`,"data-amount":e,"stroke-width":this.thickness+"%"})}addLineRanges({amount:e,color:t},a){return i("div",{class:"range",style:{"background-color":t,"margin-left":a+"%",width:100*e/(this.maxValueAux-this.minValue)+"%"}})}addLineRangesLabels({amount:e,color:t,name:a},s){return i("span",{class:"rangeName",style:{"margin-left":s+"%",color:t,transform:`translateY(${this.thickness>=7?0:this.element.offsetHeight/4+this.thickness/3}px)`,width:100*e/(this.maxValueAux-this.minValue)+"%"}},a)}renderCircle(e){const t=[],s=50-this.thickness/2;this.totalAmount=0;for(let i=e.length-1;i>=0;i--)this.totalAmount+=e[i].amount;this.updateMaxValueAux();const n=this.maxValueAux-this.minValue;let r=0;for(let i=0;i<e.length;i++)t.push(this.addCircleRanges(e[i],r,s)),r+=360*e[i].amount/n;const o=100==this.calcPercentage()?"rotate(449.5deg)":`rotate(${3.6*this.calcPercentage()+90}deg)`;return this.showValue&&new ResizeObserver(e=>{for(const t of e){const e=t.contentRect,i=Math.min(e.width,e.height),a=this.element.querySelector(".current-value"),s=this.element.querySelector(".circularMarker"),n=this.element.querySelector(".circularIndicator");a.setAttribute("style",`font-size: ${i/2.5}px`),s.setAttribute("style",`transform: ${o}; max-width: ${i}px`),n.setAttribute("style",`width: ${this.thickness+2}%; height: ${i/100}px`)}}).observe(this.element),i(a,null,i("div",{class:"svgContainer"},i("svg",{viewBox:"0 0 100 100"},i("circle",{r:s,cx:"50%",cy:"50%",stroke:"rgba(0, 0, 0, 0.2)",fill:"none","stroke-width":this.thickness/2+"%"}),t),this.showValue&&i("div",{class:"gauge"},i("div",null,this.showValue&&i("span",{class:"current-value"},""+this.value)))),this.showValue&&i("div",{class:"circularMarker"},i("div",{class:"circularIndicator"})))}renderLine(e){const t=[],a=[];this.totalAmount=0;for(let i=e.length-1;i>=0;i--)this.totalAmount+=e[i].amount;this.updateMaxValueAux();const s=this.value<=this.minValue?0:this.value>=this.maxValueAux?100:this.calcPercentage()>=98?72:50,n=this.maxValueAux-this.minValue;let r=0;for(let i=0;i<e.length;i++)t.push(this.addLineRanges(e[i],r)),a.push(this.addLineRangesLabels(e[i],r)),r+=100*e[i].amount/n;return i("div",{class:"gaugeContainerLine",style:{height:10*this.calcThickness()+"px","margin-top":(this.showValue||this.thickness<7?23.5:0)+"px","margin-bottom":(this.showValue&&this.thickness<7?22:this.showMinMax?20:1)+"px"}},i("div",{class:"gauge"},this.showValue?i("span",{class:"marker",style:{"margin-left":(this.value<=this.minValue?0:this.value>=this.maxValueAux?100:this.calcPercentage())+"%",transform:`translate(-${s}%, -28px)`}},this.value):""),i("div",{class:"rangesContainer",style:{height:2*this.thickness+"px","border-radius":this.thickness+"px"}},t),this.showValue?i("span",{class:"marker",style:{"margin-left":(this.calcPercentage()>=100?100:this.calcPercentage())+"%"}},i("div",{class:"indicator",style:{height:2*this.thickness+4+"px","border-left-width":this.element.offsetWidth/document.body.offsetWidth+"vw",transform:this.calcPercentage()>0&&this.calcPercentage()<100?"translateX(-50%)":this.calcPercentage()>=100?"translateX(-100%)":"translateX(0%)"}})):"",i("div",{class:"labelsContainerLine"},a),this.showMinMax?i("div",{class:"minMaxDisplay"},i("span",{class:"minValue"},this.minValue,i("span",null)),i("span",{class:"maxValue"},this.maxValueAux,i("span",null))):"")}render(){this.minimumSize=this.element.offsetHeight>this.element.offsetWidth?this.element.offsetWidth:this.element.offsetHeight;const e=Array.from(this.element.querySelectorAll("gx-gauge-range"));return"circle"===this.type?this.renderCircle(e):"line"===this.type?this.renderLine(e):void console.warn("Error rendering component. Invalid type of gauge in ",this.element)}get element(){return s(this)}};n.style='.gx-line-clamp{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:var(--max-lines);overflow:hidden;max-height:var(--max-height)}.line-measuring{visibility:hidden;position:absolute}gx-gauge{--center-circle-text-color:rgba(44, 44, 44, 1);--center-circle-background-color:rgba(255, 255, 255, 0);--indicator-circle-background-color:rgba(44, 44, 44, 1);--value-text-color:rgba(44, 44, 44, 1);--value-text-background-color:rgba(255, 255, 255, 0.8);--max-value-background-color:rgba(255, 255, 255, 0.8);--max-value-text-color:rgba(40, 40, 40, 0.8);--min-value-background-color:rgba(255, 255, 255, 0.8);--min-value-text-color:rgba(40, 40, 40, 0.8);--indicator-line-background-color:rgba(44, 44, 44, 1);display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-line-pack:center;align-content:center;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap;position:relative;width:100%}gx-gauge .gaugeContainerLine{position:relative;width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}gx-gauge .gaugeContainerLine .gauge{display:-ms-flexbox;display:flex}gx-gauge .gaugeContainerLine .gauge .marker{background-color:var(--value-text-background-color);color:var(--value-text-color)}gx-gauge .gaugeContainerLine .minMaxDisplay{z-index:1;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;width:100%}gx-gauge .gaugeContainerLine .minMaxDisplay .maxValue{background-color:var(--max-value-background-color);color:var(--max-value-text-color)}gx-gauge .gaugeContainerLine .minMaxDisplay .minValue{background-color:var(--min-value-background-color);color:var(--min-value-text-color)}gx-gauge .gaugeContainerLine .rangesContainer{overflow:hidden;position:absolute;width:calc(100%);background-color:rgba(0, 0, 0, 0.2)}gx-gauge .gaugeContainerLine .rangesContainer .range{height:100%;position:absolute;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-line-pack:center;align-content:center;-webkit-transition:0.3s ease;transition:0.3s ease}gx-gauge .gaugeContainerLine span.marker{-webkit-transform:translateY(-4px);transform:translateY(-4px);position:absolute;z-index:1;-webkit-transition:0.3s ease;transition:0.3s ease}gx-gauge .gaugeContainerLine span.marker .indicator{content:"";border-left-style:solid;border-left-color:var(--indicator-line-background-color);display:block;background-color:var(--indicator-line-background-color)}gx-gauge .gaugeContainerLine .labelsContainerLine{width:calc(100%);height:calc(100%);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}gx-gauge .gaugeContainerLine .labelsContainerLine .rangeName{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-line-pack:center;align-content:center;margin-top:1px;position:absolute;-webkit-filter:brightness(0.5);filter:brightness(0.5);-webkit-transition:0.3s ease;transition:0.3s ease}gx-gauge .svgContainer{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-line-pack:center;align-content:center;height:100%;width:100%;-ms-flex-align:center;align-items:center}gx-gauge .svgContainer svg{width:100%;height:100%}gx-gauge .svgContainer svg circle{-webkit-transition:0.3s ease;transition:0.3s ease}gx-gauge .svgContainer .gauge{position:absolute;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-line-pack:center;align-content:center}gx-gauge .svgContainer .gauge div{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-line-pack:center;align-content:center;color:var(--center-circle-text-color);background-color:var(--center-circle-background-color)}gx-gauge .svgContainer .gauge div span.current-value{font-weight:900}gx-gauge .circularMarker{width:100%;position:absolute;-webkit-transition:0.3s ease;transition:0.3s ease}gx-gauge .circularMarker .circularIndicator{background-color:var(--indicator-circle-background-color)}';export{n as gx_gauge}