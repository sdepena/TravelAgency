function makeSwipeable(comp) {
    const element = comp.element;
    element.addEventListener("touchstart", startTouch);
    element.addEventListener("touchmove", moveTouch);
    let initialX = null;
    let initialY = null;
    function startTouch(e) {
        initialX = e.touches[0].clientX;
        initialY = e.touches[0].clientY;
    }
    function moveTouch(e) {
        if (initialX === null) {
            return;
        }
        if (initialY === null) {
            return;
        }
        const currentX = e.touches[0].clientX;
        const currentY = e.touches[0].clientY;
        const diffX = initialX - currentX;
        const diffY = initialY - currentY;
        comp.swipe.emit(event);
        if (Math.abs(diffX) > Math.abs(diffY)) {
            // sliding horizontally
            if (diffX > 0) {
                // swiped left
                comp.swipeLeft.emit(event);
            }
            else {
                // swiped right
                comp.swipeRight.emit(event);
            }
        }
        else {
            // sliding vertically
            if (diffY > 0) {
                // swiped up
                comp.swipeUp.emit(event);
            }
            else {
                // swiped down
                comp.swipeDown.emit(event);
            }
        }
        initialX = null;
        initialY = null;
    }
}

export { makeSwipeable as m };
